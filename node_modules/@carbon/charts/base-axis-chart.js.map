{"version":3,"file":"base-axis-chart.js","sourceRoot":"","sources":["src/base-axis-chart.ts"],"names":[],"mappings":"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","sourcesContent":["// D3 Imports\nimport { select } from \"d3-selection\";\nimport { scaleBand, scaleLinear, ScaleBand, ScaleLinear } from \"d3-scale\";\nimport { axisBottom, axisLeft, axisRight } from \"d3-axis\";\nimport { min, max } from \"d3-array\";\n\nimport { BaseChart } from \"./base-chart\";\n\nimport * as Configuration from \"./configuration\";\nimport { ChartConfig, AxisChartOptions } from \"./configuration\";\nimport { Tools } from \"./tools\";\n\nexport class BaseAxisChart extends BaseChart {\n\tx: ScaleBand<any>;\n\ty: ScaleLinear<any, any>;\n\ty2: ScaleLinear<any, any>;\n\tthresholdDimensions: any;\n\n\toptions: any = Tools.merge({}, Configuration.options.AXIS);\n\n\tconstructor(holder: Element, configs: ChartConfig<AxisChartOptions>) {\n\t\tsuper(holder, configs);\n\n\t\tif (configs.options) {\n\t\t\tthis.options = Tools.merge({}, this.options, configs.options);\n\t\t\tconst { axis } = configs.options;\n\t\t\tif (axis) {\n\t\t\t\tthis.x = axis.x;\n\t\t\t\tthis.y = axis.y;\n\t\t\t\tthis.y2 = axis.y2;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetSVG(): any {\n\t\tsuper.setSVG();\n\n\t\tthis.container.classed(\"chart-axis\", true);\n\t\tthis.innerWrap.append(\"g\")\n\t\t\t.attr(\"class\", \"x grid\");\n\t\tthis.innerWrap.append(\"g\")\n\t\t\t.attr(\"class\", \"y grid\");\n\n\t\treturn this.svg;\n\t}\n\n\tinitialDraw(data?: any) {\n\t\tif (data) {\n\t\t\tthis.displayData = data;\n\t\t}\n\n\t\t// If an axis exists\n\t\tconst xAxisRef = select(this.holder).select(\".axis.x\");\n\t\tif (!xAxisRef.node()) {\n\t\t\tthis.setSVG();\n\n\t\t\t// Scale out the domains\n\t\t\t// Set the x & y axis as well as their labels\n\t\t\tthis.setXScale();\n\t\t\tthis.setXAxis();\n\t\t\tthis.setYScale();\n\t\t\tthis.setYAxis();\n\n\t\t\t// Draws the grid\n\t\t\tthis.drawGrid();\n\n\t\t\tthis.addOrUpdateLegend();\n\t\t} else {\n\t\t\tconst holderRef = select(this.holder);\n\n\t\t\tthis.innerWrap = holderRef.select(\"g.inner-wrap\");\n\t\t\tthis.svg = holderRef.select(\"svg.chart-svg\");\n\t\t}\n\n\t\tthis.draw();\n\n\t\tthis.addDataPointEventListener();\n\t}\n\n\tupdate() {\n\t\tthis.displayData = this.updateDisplayData();\n\n\t\tthis.updateXandYGrid();\n\t\tthis.setXScale();\n\t\tthis.setXAxis();\n\t\tthis.setYScale();\n\t\tthis.setYAxis();\n\t\tthis.drawBackdrop();\n\t\tthis.interpolateValues(this.displayData);\n\t}\n\n\tupdateDisplayData() {\n\t\tconst oldData = Tools.clone(this.data);\n\t\tconst activeLegendItems = this.getActiveLegendItems();\n\n\t\t// Get new data by filtering the data based off of the legend\n\t\tconst newDisplayData = Object.assign({}, oldData);\n\t\tif (this.getLegendType() === Configuration.legend.basedOn.SERIES) {\n\t\t\tnewDisplayData.datasets = oldData.datasets.filter(dataset => {\n\t\t\t\t// If this datapoint is active on the legend\n\t\t\t\tconst activeSeriesItemIndex = activeLegendItems.indexOf(dataset.label);\n\n\t\t\t\treturn activeSeriesItemIndex !== -1;\n\t\t\t});\n\t\t} else {\n\t\t\tconst dataIndeciesToRemove = [];\n\t\t\tnewDisplayData.labels = oldData.labels.filter((label, index) => {\n\t\t\t\t// If this datapoint is active on the legend\n\t\t\t\tconst activeSeriesItemIndex = activeLegendItems.indexOf(label);\n\n\t\t\t\tif (activeSeriesItemIndex === -1) {\n\t\t\t\t\tdataIndeciesToRemove.push(index);\n\t\t\t\t}\n\n\t\t\t\treturn activeSeriesItemIndex !== -1;\n\t\t\t});\n\n\t\t\tif (dataIndeciesToRemove.length > 0) {\n\t\t\t\tnewDisplayData.datasets = oldData.datasets.map(dataset => {\n\t\t\t\t\tdataset.data = dataset.data.filter((dataPoint, i) => {\n\t\t\t\t\t\treturn dataIndeciesToRemove.indexOf(i) === -1;\n\t\t\t\t\t});\n\n\t\t\t\t\treturn dataset;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn newDisplayData;\n\t}\n\n\taddLabelsToDataPoints(d, index) {\n\t\tconst { datasets } = this.displayData;\n\n\t\treturn datasets.map(dataset => ({\n\t\t\tlabel: d,\n\t\t\tdatasetLabel: dataset.label,\n\t\t\tvalue: dataset.data[index]\n\t\t}));\n\t}\n\n\tdraw() {\n\t\tconsole.warn(\"You should implement your own `draw()` function.\");\n\t}\n\n\tinterpolateValues(newData: any) {\n\t\tconsole.warn(\"You should implement your own `interpolateValues()` function.\");\n\t}\n\n\t/**************************************\n\t *  Computations/Calculations         *\n\t *************************************/\n\t// TODO - Refactor\n\tgetChartSize(container = this.container) {\n\t\tlet ratio, marginForLegendTop, marginForChartTitle;\n\t\tif (container.node().clientWidth > Configuration.charts.widthBreak) {\n\t\t\tratio = Configuration.charts.magicRatio;\n\t\t\tmarginForLegendTop = 0;\n\t\t} else {\n\t\t\tmarginForLegendTop = Configuration.charts.marginForLegendTop;\n\t\t\tratio = 1;\n\t\t}\n\n\t\t// Store computed actual size, to be considered for change if chart does not support axis\n\t\tconst marginsToExclude = Configuration.charts.margin.left + Configuration.charts.margin.right;\n\n\t\tmarginForChartTitle = this.options.title ? Configuration.charts.title.marginBottom : 0;\n\n\t\tconst computedChartSize = {\n\t\t\theight: container.node().clientHeight - marginForLegendTop - marginForChartTitle,\n\t\t\twidth: (container.node().clientWidth - marginsToExclude) * ratio\n\t\t};\n\n\t\treturn {\n\t\t\theight: Math.max(computedChartSize.height, Configuration.charts.axisCharts.minHeight),\n\t\t\twidth: Math.max(computedChartSize.width, Configuration.charts.axisCharts.minWidth)\n\t\t};\n\t}\n\n\tresizeChart() {\n\t\t// Reposition the legend\n\t\tthis.positionLegend();\n\n\t\tif (this.innerWrap.select(\".axis-label.x\").nodes().length > 0 || this.options.scales.x.title) {\n\t\t\tthis.repositionXAxisTitle();\n\t\t}\n\n\t\tif (this.innerWrap.select(\".axis-label.y\").nodes().length > 0 || this.options.scales.y.title) {\n\t\t\tthis.repositionYAxisTitle();\n\t\t}\n\n\t\tthis.dispatchEvent(\"resize\");\n\t\tthis.drawBackdrop();\n\t}\n\n\t/**************************************\n\t *  Axis & Grids                      *\n\t *************************************/\n\n\tsetXScale(xScale?: any) {\n\t\tif (xScale) {\n\t\t\tthis.x = xScale;\n\t\t} else {\n\t\t\tconst { bar: margins } = Configuration.charts.margin;\n\t\t\tconst { scales } = this.options;\n\n\t\t\tconst chartSize = this.getChartSize();\n\t\t\tconst width = chartSize.width - margins.left - margins.right;\n\n\t\t\tthis.x = scaleBand().rangeRound([0, width]).padding(Configuration.scales.x.padding);\n\t\t\tthis.x.domain(this.displayData.labels);\n\t\t}\n\t}\n\n\tsetXAxis(noAnimation?: boolean) {\n\t\tconst { bar: margins } = Configuration.charts.margin;\n\t\tconst chartSize = this.getChartSize();\n\t\tconst height = chartSize.height - margins.top - margins.bottom;\n\n\t\tconst t = noAnimation ? this.getInstantTransition() : this.getDefaultTransition();\n\n\t\tconst xAxis = axisBottom(this.x)\n\t\t\t.tickSize(0)\n\t\t\t.tickSizeOuter(0);\n\t\tlet xAxisRef = this.svg.select(\"g.x.axis\");\n\n\t\t// If the <g class=\"x axis\"> exists in the chart SVG, just update it\n\t\tif (xAxisRef.nodes().length > 0) {\n\t\t\txAxisRef = this.svg.select(\"g.x.axis\")\n\t\t\t\t.transition(t)\n\t\t\t\t.attr(\"transform\", `translate(0, ${height})`)\n\t\t\t\t// Casting to any because d3 does not offer appropriate typings for the .call() function\n\t\t\t\t.call(xAxis);\n\t\t} else {\n\t\t\txAxisRef = this.innerWrap.append(\"g\")\n\t\t\t\t.attr(\"class\", \"x axis\");\n\n\t\t\txAxisRef.call(xAxis);\n\t\t}\n\n\t\t// Update the position of the pieces of text inside x-axis\n\t\txAxisRef.selectAll(\"g.tick text\")\n\t\t\t.attr(\"y\", Configuration.scales.magicY1)\n\t\t\t.attr(\"x\", Configuration.scales.magicX1)\n\t\t\t.attr(\"dy\", \".35em\")\n\t\t\t.attr(\"transform\", `rotate(${Configuration.scales.xAxisAngle})`)\n\t\t\t.style(\"text-anchor\", \"end\")\n\t\t\t.call(text => this.wrapTick(text));\n\n\t\t// get the tickHeight after the ticks have been wrapped\n\t\tconst tickHeight = this.getLargestTickHeight(xAxisRef.selectAll(\".tick\")) + Configuration.scales.tick.heightAddition;\n\t\t// Add x-axis title\n\t\tif (this.innerWrap.select(\".axis-label.x\").nodes().length === 0 && this.options.scales.x.title) {\n\t\t\txAxisRef.append(\"text\")\n\t\t\t\t.attr(\"class\", \"x axis-label\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.attr(\"transform\", `translate(${xAxisRef.node().getBBox().width / 2}, ${tickHeight})`)\n\t\t\t\t.text(this.options.scales.x.title);\n\t\t}\n\n\t\t// get the yHeight after the height of the axis has settled\n\t\tconst yHeight = this.getChartSize().height - this.svg.select(\".x.axis\").node().getBBox().height;\n\t\txAxisRef.attr(\"transform\", `translate(0, ${yHeight})`);\n\t}\n\n\trepositionXAxisTitle() {\n\t\tconst xAxisRef = this.svg.select(\"g.x.axis\");\n\t\tconst tickHeight = this.getLargestTickHeight(xAxisRef.selectAll(\".tick\")) + Configuration.scales.tick.heightAddition;\n\n\t\tconst xAxisTitleRef = this.svg.select(\"g.x.axis text.x.axis-label\");\n\t\txAxisTitleRef.attr(\"class\", \"x axis-label\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"transform\", `translate(${xAxisRef.node().getBBox().width / 2}, ${tickHeight})`)\n\t\t\t.text(this.options.scales.x.title);\n\t}\n\n\trepositionYAxisTitle() {\n\t\tconst yAxisRef = this.svg.select(\"g.y.axis\");\n\t\tconst tickHeight = this.getLargestTickHeight(yAxisRef.selectAll(\".tick\"));\n\n\t\tconst yAxisTitleRef = this.svg.select(\"g.y.axis text.y.axis-label\");\n\n\t\tconst yAxisCenter = yAxisRef.node().getBBox().height / 2;\n\t\tconst yAxisLabelWidth = this.innerWrap.select(\".axis-label.y\").node().getBBox().width;\n\n\t\tconst yAxisTitleTranslate = {\n\t\t\tx: - yAxisCenter + yAxisLabelWidth / 2,\n\t\t\ty: - (tickHeight + Configuration.scales.tick.heightAddition)\n\t\t};\n\n\t\t// Align y axis title with y axis\n\t\tyAxisTitleRef.attr(\"class\", \"y axis-label\")\n\t\t.attr(\"text-align\", \"center\")\n\t\t.attr(\"transform\", `rotate(-90) translate(${yAxisTitleTranslate.x}, ${yAxisTitleTranslate.y})`)\n\t\t.text(this.options.scales.y.title);\n\t}\n\n\tgetYMax() {\n\t\tconst { datasets } = this.displayData;\n\t\tconst { scales } = this.options;\n\t\tlet yMax;\n\n\t\tif (datasets.length === 1) {\n\t\t\tyMax = max(datasets[0].data);\n\t\t} else {\n\t\t\tyMax = max(datasets, (d: any) => (max(d.data)));\n\t\t}\n\n\t\tif (scales.y.yMaxAdjuster) {\n\t\t\tyMax = scales.y.yMaxAdjuster(yMax);\n\t\t}\n\n\t\treturn yMax;\n\t}\n\n\tgetYMin() {\n\t\tconst { datasets } = this.displayData;\n\t\tconst { scales } = this.options;\n\t\tlet yMin;\n\n\t\tif (datasets.length === 1) {\n\t\t\tyMin = min(datasets[0].data);\n\t\t} else {\n\t\t\tyMin = min(datasets, (d: any) => (min(d.data)));\n\t\t}\n\n\t\tif (scales.y.yMinAdjuster) {\n\t\t\tyMin = scales.y.yMinAdjuster(yMin);\n\t\t}\n\n\t\treturn yMin;\n\t}\n\n\tsetYScale(yScale?: any) {\n\t\tconst chartSize = this.getChartSize();\n\t\tconst height = chartSize.height - this.innerWrap.select(\".x.axis\").node().getBBox().height;\n\n\t\tconst { scales } = this.options;\n\n\t\tconst yMin = this.getYMin();\n\t\tconst yMax = this.getYMax();\n\t\tif (yScale) {\n\t\t\tthis.y = yScale;\n\t\t} else {\n\t\t\tthis.y = scaleLinear().range([height, 0]);\n\t\t\tthis.y.domain([Math.min(yMin, 0), yMax]);\n\t\t}\n\n\t\tif (scales.y2 && scales.y2.ticks.max) {\n\t\t\tthis.y2 = scaleLinear().rangeRound([height, 0]);\n\t\t\tthis.y2.domain([scales.y2.ticks.min, scales.y2.ticks.max]);\n\t\t}\n\t}\n\n\tsetYAxis(noAnimation?: boolean) {\n\t\tconst chartSize = this.getChartSize();\n\n\t\tconst { scales } = this.options;\n\t\tconst t = noAnimation ? this.getInstantTransition() : this.getDefaultTransition();\n\n\t\tconst yAxis = axisLeft(this.y)\n\t\t\t.ticks(scales.y.numberOfTicks || Configuration.scales.y.numberOfTicks)\n\t\t\t.tickSize(0)\n\t\t\t.tickFormat(scales.y.formatter);\n\n\t\tlet yAxisRef = this.svg.select(\"g.y.axis\");\n\t\tconst horizontalLine = this.svg.select(\"line.domain\");\n\n\t\tthis.svg.select(\"g.x.axis path.domain\")\n\t\t\t.remove();\n\n\t\t// If the <g class=\"y axis\"> exists in the chart SVG, just update it\n\t\tif (yAxisRef.nodes().length > 0) {\n\t\t\tyAxisRef.transition(t)\n\t\t\t\t// Casting to any because d3 does not offer appropriate typings for the .call() function\n\t\t\t\t.call(yAxis as any);\n\n\t\t\thorizontalLine.transition(t)\n\t\t\t\t.attr(\"y1\", this.y(0))\n\t\t\t\t.attr(\"y2\", this.y(0))\n\t\t\t\t.attr(\"x1\", 0)\n\t\t\t\t.attr(\"x2\", chartSize.width);\n\t\t} else {\n\t\t\tyAxisRef = this.innerWrap.append(\"g\")\n\t\t\t\t.attr(\"class\", \"y axis yAxes\");\n\n\t\t\tyAxisRef.call(yAxis);\n\n\t\t\tyAxisRef.append(\"line\")\n\t\t\t\t.classed(\"domain\", true)\n\t\t\t\t.attr(\"y1\", this.y(0))\n\t\t\t\t.attr(\"y2\", this.y(0))\n\t\t\t\t.attr(\"x1\", 0)\n\t\t\t\t.attr(\"x2\", chartSize.width);\n\t\t}\n\n\t\tconst tickHeight = this.getLargestTickHeight(yAxisRef.selectAll(\".tick\"));\n\n\t\t// Add y-axis title\n\t\tif (this.innerWrap.select(\".axis-label.y\").nodes().length === 0 && this.options.scales.y.title) {\n\t\t\tyAxisRef.append(\"text\")\n\t\t\t\t.attr(\"class\", \"y axis-label\")\n\t\t\t\t.text(this.options.scales.y.title);\n\n\t\t\tconst yAxisCenter = yAxisRef.node().getBBox().height / 2;\n\t\t\tconst yAxisLabelWidth = this.innerWrap.select(\".axis-label.y\").node().getBBox().width;\n\n\t\t\tconst yAxisTitleTranslate = {\n\t\t\t\tx: - yAxisCenter + yAxisLabelWidth / 2,\n\t\t\t\ty: - (tickHeight + Configuration.scales.tick.heightAddition)\n\t\t\t};\n\n\t\t\t// Align y axis title on the y axis\n\t\t\tthis.innerWrap.select(\".axis-label.y\")\n\t\t\t\t.attr(\"transform\", `rotate(-90) translate(${yAxisTitleTranslate.x}, ${yAxisTitleTranslate.y})`);\n\t\t}\n\n\t\tTools.moveToFront(horizontalLine);\n\n\t\tif (scales.y2 && scales.y2.ticks.max) {\n\t\t\tconst secondaryYAxis = axisRight(this.y2)\n\t\t\t\t.ticks(scales.y2.numberOfTicks || Configuration.scales.y2.numberOfTicks)\n\t\t\t\t.tickSize(0)\n\t\t\t\t.tickFormat(scales.y2.formatter);\n\n\t\t\tconst secondaryYAxisRef = this.svg.select(\"g.y2.axis\");\n\t\t\t// If the <g class=\"y axis\"> exists in the chart SVG, just update it\n\t\t\tif (secondaryYAxisRef.nodes().length > 0) {\n\t\t\t\tsecondaryYAxisRef.transition(t)\n\t\t\t\t\t.attr(\"transform\", `translate(${this.getChartSize().width}, 0)`)\n\t\t\t\t\t// Being cast to any because d3 does not offer appropriate typings for the .call() function\n\t\t\t\t\t.call(secondaryYAxis as any);\n\t\t\t} else {\n\t\t\t\tthis.innerWrap.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"y2 axis yAxes\")\n\t\t\t\t\t.attr(\"transform\", `translate(${this.getChartSize().width}, 0)`)\n\t\t\t\t\t.call(secondaryYAxis);\n\t\t\t}\n\t\t}\n\t}\n\n\tdrawGrid() {\n\t\t// Draw the x & y grid\n\t\tthis.drawXGrid();\n\t\tthis.drawYGrid();\n\n\t\t// Draw the backdrop\n\t\tthis.drawBackdrop();\n\t}\n\n\tdrawXGrid() {\n\t\tconst yHeight = this.getChartSize().height - this.getBBox(\".x.axis\").height;\n\t\tconst xGrid = axisBottom(this.x)\n\t\t\t.tickSizeInner(-yHeight)\n\t\t\t.tickSizeOuter(0);\n\n\t\tconst g = this.innerWrap.select(\".x.grid\")\n\t\t\t.attr(\"transform\", `translate(0, ${yHeight})`)\n\t\t\t.call(xGrid);\n\n\t\tthis.cleanGrid(g);\n\t}\n\n\tdrawYGrid() {\n\t\tconst { scales } = this.options;\n\t\tconst { thresholds } = this.options.scales.y;\n\t\tconst yHeight = this.getChartSize().height - this.getBBox(\".x.axis\").height;\n\n\t\tconst yGrid = axisLeft(this.y)\n\t\t\t.tickSizeInner(-this.getChartSize().width)\n\t\t\t.tickSizeOuter(0);\n\n\t\tyGrid.ticks(scales.y.numberOfTicks || Configuration.scales.y.numberOfTicks);\n\n\t\tconst g = this.innerWrap.select(\".y.grid\")\n\t\t\t.attr(\"transform\", \"translate(0, 0)\")\n\t\t\t.call(yGrid);\n\n\t\tthis.cleanGrid(g);\n\n\t\tif (thresholds && thresholds.length > 0) {\n\t\t\tthis.addOrUpdateThresholds(g, false);\n\t\t}\n\t}\n\n\t/**\n\t * Draws the background for the chart grid. Uses the axis to get the bounds and position of the backdrop.\n\t */\n\tdrawBackdrop() {\n\t\tconst backdrop = Tools.appendOrSelect(this.innerWrap, \"rect.chart-grid-backdrop\");\n\t\tconst [xScaleStart, xScaleEnd] = this.x.range();\n\t\tconst [yScaleEnd, yScaleStart] = this.y.range();\n\n\t\tbackdrop\n\t\t\t.attr(\"x\", xScaleStart)\n\t\t\t.attr(\"y\", yScaleStart)\n\t\t\t.attr(\"width\", xScaleEnd)\n\t\t\t.attr(\"height\", yScaleEnd)\n\t\t\t.lower();\n\t}\n\n\taddOrUpdateThresholds(yGrid, animate?) {\n\t\tconst t = animate === false ? this.getInstantTransition() : this.getDefaultTransition();\n\n\t\tconst width = this.getChartSize().width;\n\t\tconst { thresholds } = this.options.scales.y;\n\n\t\t// Check if the thresholds container <g> exists\n\t\tconst thresholdContainerExists = this.innerWrap.select(\"g.thresholds\").nodes().length > 0;\n\t\tconst thresholdRects = thresholdContainerExists\n\t\t\t? this.innerWrap.selectAll(\"g.thresholds rect\")\n\t\t\t: this.innerWrap.append(\"g\").classed(\"thresholds\", true).selectAll(\"rect\").data(thresholds);\n\n\t\tconst calculateYPosition = d => {\n\t\t\treturn Math.max(0, this.y(d.range[1]));\n\t\t};\n\n\t\tconst calculateHeight = d => {\n\t\t\tconst height = Math.abs(this.y(d.range[1]) - this.y(d.range[0]));\n\t\t\tconst yMax = this.y(this.y.domain()[0]);\n\n\t\t\t// If the threshold is getting cropped because it is extending beyond\n\t\t\t// the top of the chart, update its height to reflect the crop\n\t\t\tif (this.y(d.range[1]) < 0) {\n\t\t\t\treturn Math.max(0, height + this.y(d.range[1]));\n\t\t\t} else if (this.y(d.range[1]) + height > yMax) {\n\t\t\t\t// If the threshold is getting cropped because it is extending beyond\n\t\t\t\t// the bottom of the chart, update its height to reflect the crop\n\t\t\t\treturn Math.max(0, yMax - calculateYPosition(d));\n\t\t\t}\n\n\t\t\treturn Math.max(0, height);\n\t\t};\n\n\t\tconst calculateOpacity = d => {\n\t\t\tconst height = Math.abs(this.y(d.range[1]) - this.y(d.range[0]));\n\n\t\t\t// If the threshold is to be shown anywhere\n\t\t\t// outside of the top edge of the chart, hide it\n\t\t\tif (this.y(d.range[1]) + height <= 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn 1;\n\t\t};\n\n\t\t// Applies to thresholds being added\n\t\tthresholdRects.enter()\n\t\t\t.append(\"rect\")\n\t\t\t.classed(\"threshold-bar\", true)\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", d => calculateYPosition(d))\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", d => calculateHeight(d))\n\t\t\t.attr(\"fill\", d => Configuration.scales.y.thresholds.colors[d.theme])\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.transition(t)\n\t\t\t.style(\"opacity\", d => calculateOpacity(d));\n\n\t\t// Update thresholds\n\t\tthresholdRects\n\t\t\t.transition(t)\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", d => calculateYPosition(d))\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", d => calculateHeight(d))\n\t\t\t.style(\"opacity\", d => calculateOpacity(d))\n\t\t\t.attr(\"fill\", d => Configuration.scales.y.thresholds.colors[d.theme]);\n\n\t\t// Applies to thresholds getting removed\n\t\tthresholdRects.exit()\n\t\t\t.transition(t)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\t}\n\n\tupdateXandYGrid(noAnimation?: boolean) {\n\t\tconst { thresholds } = this.options.scales.y;\n\n\t\t// setTimeout is needed here, to take into account the new position of bars\n\t\t// Right after transitions are initiated for the\n\t\tsetTimeout(() => {\n\t\t\tconst t = noAnimation ? this.getInstantTransition() : this.getDefaultTransition();\n\n\t\t\t// Update X Grid\n\t\t\tconst chartSize = this.getChartSize();\n\t\t\tconst yHeight = chartSize.height - this.getBBox(\".x.axis\").height;\n\t\t\tconst xGrid = axisBottom(this.x)\n\t\t\t\t.tickSizeInner(-yHeight)\n\t\t\t\t.tickSizeOuter(0);\n\n\t\t\tconst g_xGrid = this.innerWrap.select(\".x.grid\")\n\t\t\t\t.transition(t)\n\t\t\t\t.attr(\"transform\", `translate(0, ${yHeight})`)\n\t\t\t\t.call(xGrid);\n\n\t\t\tthis.cleanGrid(g_xGrid);\n\n\t\t\t// Update Y Grid\n\t\t\tconst yGrid = axisLeft(this.y)\n\t\t\t\t.tickSizeInner(-chartSize.width)\n\t\t\t\t.tickSizeOuter(0)\n\t\t\t\t.tickFormat(\"\" as any);\n\n\t\t\tconst g_yGrid = this.innerWrap.select(\".y.grid\")\n\t\t\t\t.transition(t)\n\t\t\t\t.attr(\"transform\", `translate(0, 0)`)\n\t\t\t\t.call(yGrid);\n\n\t\t\tg_yGrid.transition(t);\n\n\t\t\tthis.cleanGrid(g_yGrid);\n\n\t\t\tif (thresholds && thresholds.length > 0) {\n\t\t\t\tthis.addOrUpdateThresholds(g_yGrid, !noAnimation);\n\t\t\t}\n\t\t}, 0);\n\t}\n\n\tcleanGrid(g) {\n\t\tg.selectAll(\"line\")\n\t\t\t.attr(\"stroke\", Configuration.grid.strokeColor);\n\t\tg.selectAll(\"text\").style(\"display\", \"none\").remove();\n\t\tg.select(\".domain\").style(\"stroke\", \"none\");\n\t}\n\n\t// TODO - Refactor\n\twrapTick(ticks) {\n\t\tconst self = this;\n\t\tconst lineHeight = Configuration.scales.tick.lineHeight;\n\n\t\tticks.each(function (t) {\n\t\t\tconst text = select(this);\n\t\t\tlet textContent = text.text();\n\n\t\t\t// If the text has already been broken down into parts\n\t\t\tif (text.selectAll(\"tspan\").nodes().length > 1) {\n\t\t\t\ttextContent = text.selectAll(\"tspan\")\n\t\t\t\t\t.nodes()\n\t\t\t\t\t.map(node => select(node).text())\n\t\t\t\t\t.join(\" \");\n\t\t\t}\n\n\t\t\tconst words = textContent.split(/\\s+/).reverse();\n\t\t\tconst y = text.attr(\"y\");\n\t\t\tconst dy = parseFloat(text.attr(\"dy\"));\n\n\t\t\tlet word;\n\t\t\tlet line = [];\n\t\t\tlet lineNumber = 0;\n\t\t\tlet tspan = text.text(null)\n\t\t\t\t.append(\"tspan\")\n\t\t\t\t.attr(\"x\", 0);\n\n\t\t\t// Set max length allowed to length of datapoints\n\t\t\t// In the x-scale\n\t\t\tconst maxTextLengthAllowed = self.x.bandwidth();\n\t\t\twhile (word = words.pop()) {\n\t\t\t\tline.push(word);\n\t\t\t\ttspan.text(line.join(\" \"));\n\n\t\t\t\t// Get text length and compare to maximum length allowed\n\t\t\t\tconst tspanTextLength = tspan.node().getComputedTextLength();\n\t\t\t\tif (tspanTextLength > maxTextLengthAllowed) {\n\t\t\t\t\tline.pop();\n\t\t\t\t\ttspan.text(line.join(\" \"));\n\t\t\t\t\tline = [word];\n\n\t\t\t\t\ttspan = text.append(\"tspan\")\n\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t.attr(\"y\", y)\n\t\t\t\t\t\t.attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\n\t\t\t\t\t\t.text(word);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// TODO - Refactor\n\tgetLargestTickHeight(ticks) {\n\t\tlet largestHeight = 0;\n\t\tticks.each(function() {\n\t\t\tlet tickLength = 0;\n\t\t\ttry {\n\t\t\t\ttickLength = this.getBBox().height;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t\tif (tickLength > largestHeight) {\n\t\t\t\tlargestHeight = tickLength;\n\t\t\t}\n\n\t\t});\n\t\treturn largestHeight;\n\t}\n\n\t/**************************************\n\t *  Events & User interactions        *\n\t *************************************/\n\taddDataPointEventListener() {\n\t\tconsole.warn(\"You should implement your own `addDataPointEventListener()` function.\");\n\t}\n}\n"]}