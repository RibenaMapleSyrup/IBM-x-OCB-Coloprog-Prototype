{"version":3,"file":"pie-chart.js","sourceRoot":"","sources":["src/pie-chart.ts"],"names":[],"mappings":"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","sourcesContent":["// D3 Imports\nimport { select } from \"d3-selection\";\nimport { scaleOrdinal } from \"d3-scale\";\nimport { pie, arc, Pie, Arc } from \"d3-shape\";\nimport { interpolate } from \"d3-interpolate\";\n\nimport { BaseChart } from \"./base-chart\";\nimport * as Configuration from \"./configuration\";\nimport { ChartConfig, PieChartOptions, ChartType, ChartData } from \"./configuration\";\nimport { Tools } from \"./tools\";\n\nexport interface PieDatum {\n\tlabel: string;\n\tvalue: number;\n\titems?: Array<PieDatum>;\n}\n\nexport interface PieDataSet extends Configuration.DataSet {\n\tdata: Array<PieDatum>;\n}\n\nexport interface PieData {\n\tlabels: Array<string>;\n\tdatasets: Array<PieDataSet>;\n}\n\nexport class PieChart extends BaseChart {\n\tpie: Pie<PieChart, any>;\n\tarc: Arc<PieChart, any>;\n\thoverArc: Arc<PieChart, any>;\n\tpath: any;\n\n\toptions: PieChartOptions;\n\n\tconstructor(holder: Element, configs: ChartConfig<PieChartOptions>, type: ChartType.PIE | ChartType.DONUT = ChartType.PIE) {\n\t\tsuper(holder, configs);\n\n\t\tthis.options.type = type;\n\n\t\t// Assign colors to each slice using their label\n\t\tthis.colorScale = scaleOrdinal(this.options.colors);\n\t}\n\n\t// Sort data by value (descending)\n\tdataProcessor(dataObject: ChartData): PieData {\n\t\t// TODO - Support multiple datasets\n\t\tif (dataObject.datasets.length > 1) {\n\t\t\tconsole.warn(`Currently the Pie & Donut charts support a single dataset,\n\t\t\t\tyou appear to have more than that. Will only use your first provided dataset.`);\n\t\t}\n\n\t\t// Check for duplicate keys in the data\n\t\tconst duplicates = Tools.getDuplicateValues(dataObject.labels);\n\t\tif (duplicates.length > 0) {\n\t\t\tconsole.error(`${Tools.capitalizeFirstLetter(this.options.type)} Chart - You have duplicate keys`, duplicates);\n\t\t}\n\n\t\t// TODO - Support multiple datasets\n\t\tconst dataList: Array<any> = dataObject.datasets[0].data.map((datum, i) => ({\n\t\t\tlabel: dataObject.labels[i],\n\t\t\tvalue: datum,\n\t\t\t// datasetLabel: data.datasets[0].label\n\t\t}));\n\n\t\t// Sort data by value\n\t\tconst sortedData = dataList.sort((a, b) => b.value - a.value);\n\n\t\treturn {\n\t\t\t// Sort labels based on the order made above\n\t\t\tlabels: sortedData.map((datum, i) => datum.label),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\t// copy all the relevant properties\n\t\t\t\t\tbackgroundColors: dataObject.datasets[0].backgroundColors,\n\t\t\t\t\tchartType: dataObject.datasets[0].chartType,\n\t\t\t\t\tlabel: dataObject.datasets[0].label,\n\t\t\t\t\t// add our sorted data\n\t\t\t\t\tdata: sortedData\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n\t// If there isn't a chart already drawn in the container\n\t// This function is called and will do that\n\tinitialDraw() {\n\t\tthis.setSVG();\n\n\t\t// need to draw the title for pie and donut before draw() so that it calculates the right\n\t\t// diameter for the graph to stay within the bounds\n\t\tthis.drawTitle();\n\n\t\t// Add legend\n\t\tthis.addOrUpdateLegend();\n\n\t\t// Draw slices & labels\n\t\tthis.draw();\n\n\t\t// Add event listeners to slices\n\t\tthis.addDataPointEventListener();\n\t}\n\n\tdraw() {\n\t\tconst dataList = this.displayData.datasets[0].data;\n\n\t\tconst chartSize = this.getChartSize(this.container);\n\t\tconst diameter = Math.min(chartSize.width, chartSize.height);\n\t\tconst radius: number = this.computeRadius();\n\n\t\tselect(this.holder).select(\"svg\")\n\t\t\t.attr(\"width\", `${diameter}px`)\n\t\t\t.attr(\"height\", `${diameter}px`);\n\n\t\tthis.innerWrap\n\t\t\t.attr(\"transform\", `translate(${radius + Configuration.pie.paddingLeft},${radius})`)\n\t\t\t.attr(\"width\", `${diameter}px`)\n\t\t\t.attr(\"height\", `${diameter}px`)\n\t\t\t.attr(\"preserveAspectRatio\", \"xMinYMin\");\n\n\t\t// Compute the correct inner & outer radius\n\t\tconst marginedRadius = this.computeRadius();\n\t\tthis.arc = arc()\n\t\t\t.innerRadius(this.options.type === \"donut\" ? (marginedRadius * (3 / 4)) : 2)\n\t\t\t.outerRadius(marginedRadius);\n\n\t\tthis.hoverArc = arc()\n\t\t\t.innerRadius(this.options.type === \"donut\" ? (marginedRadius * (3 / 4)) : 2)\n\t\t\t.outerRadius(marginedRadius + 3);\n\n\t\tthis.pie = pie()\n\t\t\t.value((d: any) => d.value)\n\t\t\t.sort(null)\n\t\t\t.padAngle(0.007);\n\n\t\t// Draw the slices\n\t\tthis.path = this.innerWrap.selectAll(\"path\")\n\t\t\t.data(this.pie(dataList))\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"d\", this.arc)\n\t\t\t.attr(\"fill\", d => this.getFillColor(this.displayData.datasets[0].label, d.data.label, d.data.value)) // Support multiple datasets\n\t\t\t.each(function (d) { this._current = d; });\n\n\t\t// Draw the slice labels\n\t\tconst self = this;\n\t\tthis.innerWrap\n\t\t\t.selectAll(\"text.chart-label\")\n\t\t\t.data(this.pie(dataList), (d: any) => d.data.label)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.classed(\"chart-label\", true)\n\t\t\t.attr(\"dy\", Configuration.pie.label.dy)\n\t\t\t.style(\"text-anchor\", \"middle\")\n\t\t\t.text(d => self.getSliceLabelText(d.data.value, dataList))\n\t\t\t.attr(\"transform\", function (d) { return self.getChartLabelTranslateString(this, d, radius, dataList.length); });\n\n\t\tthis.positionChart();\n\n\t\t// Hide overlay\n\t\tthis.chartOverlay.hide();\n\t}\n\n\t// Interpolated transitions for older data points to reflect the new data changes\n\tinterpolateValues(newData: any) {\n\t\tconst dataList = newData.datasets[0].data;\n\n\t\t// Apply the new data to the slices, and interpolate them\n\t\tconst self = this;\n\t\tconst path = this.innerWrap.selectAll(\"path\").data(this.pie(dataList));\n\n\t\t// Update slices\n\t\tpath\n\t\t\t.transition()\n\t\t\t.duration(0)\n\t\t\t.transition()\n\t\t\t.style(\"opacity\", 1)\n\t\t\t.duration(Configuration.transitions.default.duration)\n\t\t\t.attr(\"fill\", d => this.getFillColor(this.displayData.datasets[0].label, d.data.label, d.data.value))\n\t\t\t.attrTween(\"d\", function (a) {\n\t\t\t\treturn arcTween.bind(this)(a, self.arc);\n\t\t\t});\n\n\t\tpath.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"d\", this.arc)\n\t\t\t.transition()\n\t\t\t.duration(0)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.transition()\n\t\t\t.duration(Configuration.transitions.default.duration)\n\t\t\t.attr(\"fill\", d => this.getFillColor(this.displayData.datasets[0].label, d.data.label, d.data.value))\n\t\t\t.style(\"opacity\", 1)\n\t\t\t.attrTween(\"d\", function (a) {\n\t\t\t\treturn arcTween.bind(this)(a, self.arc);\n\t\t\t});\n\n\t\tpath\n\t\t\t.exit()\n\t\t\t.attr(\"d\", this.arc)\n\t\t\t.transition()\n\t\t\t.duration(Configuration.transitions.default.duration)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\t// Fade out all text labels\n\t\tthis.innerWrap.selectAll(\"text.chart-label\")\n\t\t\t.transition(self.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.transition(self.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t.style(\"opacity\", 1);\n\n\n\t\t// fade out left callout\n\t\tthis.innerWrap.select(\"g.callout-lines-left\")\n\t\t\t.transition(self.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.transition(self.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t.style(\"opacity\", 1);\n\n\t\t// fade out right callout\n\t\tthis.innerWrap.select(\"g.callout-lines-right\")\n\t\t\t.transition(self.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.transition(self.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t.style(\"opacity\", 1);\n\n\t\t// Move text labels to their new location, and fade them in again\n\t\tconst radius = this.computeRadius();\n\t\tsetTimeout(() => {\n\t\t\tconst text = this.innerWrap.selectAll(\"text.chart-label\")\n\t\t\t\t.data(this.pie(dataList), d => d.label);\n\n\t\t\ttext\n\t\t\t\t.enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.classed(\"chart-label\", true)\n\t\t\t\t.attr(\"dy\", Configuration.pie.label.dy)\n\t\t\t\t.style(\"text-anchor\", \"middle\")\n\t\t\t\t.text(d => self.getSliceLabelText(d.data.value, dataList))\n\t\t\t\t.attr(\"transform\", function (d) { return self.getChartLabelTranslateString(this, d, radius, dataList.length); })\n\t\t\t\t.style(\"opacity\", 0)\n\t\t\t\t.transition(this.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t\t.style(\"opacity\", 1);\n\n\t\t\ttext\n\t\t\t\t.style(\"text-anchor\", \"middle\")\n\t\t\t\t.text(d => self.getSliceLabelText(d.data.value, dataList))\n\t\t\t\t.attr(\"transform\", function (d) { return self.getChartLabelTranslateString(this, d, radius); })\n\t\t\t\t.transition(this.getDefaultTransition(\"pie_chart_titles\"))\n\t\t\t\t.style(\"opacity\", 1);\n\n\t\t\ttext\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t}, Configuration.transitions.pie_chart_titles.duration);\n\n\t\t// Add slice hover actions, and clear any slice borders present\n\t\tthis.addDataPointEventListener();\n\t\tthis.reduceOpacity();\n\n\t\t// Hide the overlay\n\t\tthis.chartOverlay.hide();\n\t}\n\n\t// TODO - Possible inherits from base-chart\n\treduceOpacity(exception?: any) {\n\t\tif (exception) {\n\t\t\t// this.innerWrap.selectAll(\"path\").attr(\"fill-opacity\", Configuration.charts.reduceOpacity.opacity);\n\n\t\t\t// Fade everything out except for this element\n\t\t\tselect(exception).attr(\"fill-opacity\", false);\n\t\t\tselect(exception).attr(\"fill\", (d: any) => this.getFillColor(this.displayData.datasets[0].label, d.data.label, d.data.value));\n\t\t}\n\t}\n\n\tgetTooltipHTML = d => this.generateTooltipHTML(d.data.label, d.value.toLocaleString());\n\n\t// TODO - Refactor\n\taddDataPointEventListener() {\n\t\tconst self = this;\n\n\t\tthis.innerWrap.selectAll(\"path\")\n\t\t\t.on(\"click\", d => self.dispatchEvent(\"pie-slice-onClick\", d))\n\t\t\t.on(\"mouseover\", function (d) {\n\t\t\t\tconst sliceElement = select(this);\n\t\t\t\tTools.moveToFront(sliceElement);\n\n\t\t\t\tsliceElement\n\t\t\t\t\t.transition(self.getDefaultTransition(\"pie_slice_hover\"))\n\t\t\t\t\t.attr(\"d\", self.hoverArc);\n\n\t\t\t\tself.showTooltip(d);\n\t\t\t\tself.reduceOpacity(this);\n\t\t\t})\n\t\t\t.on(\"mousemove\", d => self.tooltip.positionTooltip())\n\t\t\t.on(\"mouseout\", function (d) {\n\t\t\t\tselect(this)\n\t\t\t\t\t.transition(self.getDefaultTransition(\"pie_slice_hover\"))\n\t\t\t\t\t.attr(\"d\", self.arc);\n\n\t\t\t\tself.hideTooltip();\n\t\t\t});\n\t}\n\n\tupdate(newData?: any) {\n\t\tconst oldData = Tools.clone(this.displayData);\n\t\tconst activeLegendItems = this.getActiveLegendItems();\n\n\t\t// TODO - Support multiple datasets\n\t\tconst newDisplayData = Object.assign({}, oldData);\n\t\tnewDisplayData.datasets[0].data = oldData.datasets[0].data.filter(dataPoint => activeLegendItems.indexOf(dataPoint.label) !== -1);\n\n\t\tnewDisplayData.labels = newDisplayData.datasets[0].data.map(datum => datum.label);\n\n\t\tthis.interpolateValues(newDisplayData);\n\t}\n\n\tresizeChart() {\n\t\tconst chartSize: any = this.getChartSize(this.container);\n\t\tconst dimensionToUseForScale = Math.min(chartSize.width, chartSize.height);\n\t\tconst radius: number = this.computeRadius();\n\n\t\t// Resize the SVG\n\t\tselect(this.holder).select(\"svg\")\n\t\t\t.attr(\"width\", `${dimensionToUseForScale}px`)\n\t\t\t.attr(\"height\", `${dimensionToUseForScale}px`);\n\t\tthis.innerWrap\n\t\t\t.attr(\"transform\", `translate(${radius + Configuration.pie.paddingLeft},${radius})`);\n\n\t\t// Resize the arcs\n\t\tthis.arc = arc()\n\t\t\t.innerRadius(this.options.type === \"donut\" ? (radius * (3 / 4)) : 2)\n\t\t\t.outerRadius(radius);\n\n\t\t// Resize the arc\n\t\tthis.hoverArc = arc()\n\t\t\t.innerRadius(this.options.type === \"donut\" ? (radius * (3 / 4)) : 2)\n\t\t\t.outerRadius(radius + 3);\n\n\t\tthis.innerWrap.selectAll(\"path\")\n\t\t\t.attr(\"d\", this.arc);\n\n\t\tconst self = this;\n\t\t// not using the actual data in case \"Other\" category functionality is present\n\t\tconst totalSlices = this.innerWrap.selectAll(\"text.chart-label\").size();\n\n\t\tthis.innerWrap\n\t\t\t.selectAll(\"text.chart-label\")\n\t\t\t.attr(\"transform\", function (d) { return self.getChartLabelTranslateString(this, d, radius, totalSlices); });\n\n\t\t// Reposition the legend\n\t\tthis.positionLegend();\n\n\t\t// position the entire chart after titles, legend and labels are added\n\t\tthis.positionChart();\n\t}\n\n\t/**\n\t * The getChartSize function for pie and donut need to return the size of the\n\t * graph container while accounting for slice labels, callouts and a top legend.\n\t * Without accounting for padding, the pie/donut will try to use all space for the circle and labels fall outside.\n\t * @param container\n\t */\n\tgetChartSize(container) {\n\t\tconst containerSize = super.getChartSize(container);\n\t\t// if legend is on the top, we want the chart container to take that into account\n\t\tconst legendHeight = this.container.select(\".legend-wrapper\").node().getBoundingClientRect().height;\n\t\t// padding for labels on top and below\n\t\t// accounting for callouts even when there are none so that the radius does not need to change on update\n\t\tconst labelPadding = (Configuration.pie.label.fontSize * 2) + Configuration.pie.callout.calloutOffsetY;\n\t\t// to get the margin between slices and text/callouts, we convert the em value to pixels\n\t\tconst textMargin = Configuration.pie.label.fontSize + +Configuration.pie.label.dy.replace(/[^0-9.,]+/, \"\");\n\t\tcontainerSize.height -= (legendHeight + labelPadding + (2 * textMargin));\n\n\t\treturn containerSize;\n\t}\n\n\t// Helper functions\n\tprivate computeRadius() {\n\t\tconst chartSize: any = this.getChartSize(this.container);\n\t\tconst radius: number = Math.min(chartSize.width, chartSize.height) / 2;\n\t\treturn radius;\n\t}\n\n\t/**\n\t * This positions the entire chart after it is drawn to account for the labels and callouts\n\t */\n\tprivate positionChart() {\n\t\t// align the chart to the top of the chart container OR legend if its on top\n\t\tconst legendHeight = this.container.select(\".legend-wrapper\").node().getBoundingClientRect().height;\n\n\t\t// get the difference in position of the innerwrap to the chart container\n\t\tconst containerPos = this.container.node().getBoundingClientRect().top;\n\t\tconst innerWrapPos = this.innerWrap.node().getBoundingClientRect().top;\n\t\tlet\tdiff = innerWrapPos - containerPos;\n\n\t\tif (diff < 0) {\n\t\t\t// inner wrap to be just within the container at top\n\t\t\tdiff = Math.abs(diff) + legendHeight;\n\t\t} else {\n\t\t\t// the innerwrap is aligned below\n\t\t\tdiff = -diff + legendHeight;\n\t\t}\n\n\t\t// get current translations to add the additional difference\n\t\tconst innerWrapTranslation = Tools.getTranslationValues(this.innerWrap.node());\n\t\tthis.innerWrap\n\t\t\t.attr(\"transform\", `translate(${innerWrapTranslation.tx}, ${(+innerWrapTranslation.ty + diff)})`);\n\t}\n\n\t/**\n\t * Returns the string for the slice labels.\n\t * @param datapoint data value to get the percentage\n\t * @param dataset dataset containing all data values\n\t */\n\tprivate getSliceLabelText(datapoint, dataset) {\n\t\treturn Tools.convertValueToPercentage(datapoint, dataset) + \"%\";\n\t}\n\n\t/**\n\t * Returns the translate string for the calculated position of the slice labels.\n\t * @param element the text label element\n\t * @param d the d3 slice object\n\t * @param radius the radius of the pie or donut chart\n\t * @param totalSlices total number of slices rendered\n\t */\n\tprivate getChartLabelTranslateString(element, d, radius, totalSlices?) {\n\t\tconst textLength = element.getComputedTextLength();\n\t\tconst textOffsetX = textLength / 2;\n\t\tconst textOffsetY = parseFloat(getComputedStyle(element).fontSize) / 2;\n\n\t\tconst marginedRadius = radius + Configuration.pie.label.margin;\n\n\t\tconst theta = ((d.endAngle - d.startAngle) / 2) + d.startAngle;\n\t\tconst sliceAngleDeg = (d.endAngle - d.startAngle) * (180 / Math.PI);\n\n\t\tconst xPosition = (textOffsetX + marginedRadius) * Math.sin(theta);\n\t\tconst yPosition = (textOffsetY + marginedRadius) * -Math.cos(theta);\n\n\t\tif (!totalSlices) {\n\t\t\treturn `translate(${xPosition}, ${yPosition})`;\n\t\t}\n\t\t// check if last 2 slices (or just last) are < the threshold\n\t\tif (d.index === totalSlices - 1) {\n\t\t\tif (sliceAngleDeg < Configuration.pie.callout.sliceDegreeThreshold) {\n\t\t\t\t// start at the same location as a non-called out label\n\t\t\t\tconst startPos = {\n\t\t\t\t\tx: xPosition,\n\t\t\t\t\ty: yPosition + textOffsetY\n\t\t\t\t};\n\n\t\t\t\t// end position for the callout line\n\t\t\t\tconst endPos = {\n\t\t\t\t\tx: xPosition + Configuration.pie.callout.calloutOffsetX,\n\t\t\t\t\ty: yPosition - Configuration.pie.callout.calloutOffsetY + textOffsetY\n\t\t\t\t};\n\n\t\t\t\t// last slice always gets callout to the right side\n\t\t\t\tthis.drawCallout(startPos, endPos, Configuration.pie.callout.direction.RIGHT);\n\t\t\t\treturn `translate(${endPos.x + Configuration.pie.callout.calloutTextMargin + textOffsetX},\n\t\t\t\t\t${yPosition - Configuration.pie.callout.calloutOffsetY})`;\n\t\t\t}\n\t\t\t// remove any unneeded callout for last slice\n\t\t\tthis.removeCallout(Configuration.pie.callout.direction.RIGHT);\n\t\t}\n\t\tif (d.index === totalSlices - 2) {\n\t\t\tif (sliceAngleDeg < Configuration.pie.callout.sliceDegreeThreshold) {\n\t\t\t\t// start position for the callout line\n\t\t\t\tconst startPos = {\n\t\t\t\t\tx: xPosition,\n\t\t\t\t\ty: yPosition + textOffsetY\n\t\t\t\t};\n\n\t\t\t\t// end position for the callout line should be bottom aligned to the title\n\t\t\t\tconst endPos = {\n\t\t\t\t\tx: xPosition - Configuration.pie.callout.calloutOffsetX,\n\t\t\t\t\ty: yPosition - Configuration.pie.callout.calloutOffsetY + textOffsetY\n\t\t\t\t};\n\n\t\t\t\tthis.drawCallout(startPos, endPos, Configuration.pie.callout.direction.LEFT);\n\t\t\t\treturn `translate(${endPos.x - textOffsetX - Configuration.pie.callout.calloutTextMargin},\n\t\t\t\t\t${yPosition - Configuration.pie.callout.calloutOffsetY})`;\n\t\t\t}\n\t\t\t// remove any leftover unneeded callout\n\t\t\tthis.removeCallout(Configuration.pie.callout.direction.LEFT);\n\t\t}\n\t\treturn `translate(${xPosition}, ${yPosition})`;\n\t}\n\n\t/**\n\t * Removes the callout with the specified direction.\n\t * @param dir callout direction \"right\" or \"left\"\n\t */\n\tprivate removeCallout(dir) {\n\t\tthis.innerWrap.select(`g.callout-lines-${dir}`).remove();\n\t}\n\n\t/**\n\t * Draws a line to the text label associated with the slice.\n\t * @param startPos x,y coordinate to start the callout line\n\t * @param endPos x,y coordinate to end the callout line\n\t * @param dir direction of callout (right/left)\n\t */\n\tprivate drawCallout(startPos, endPos, dir) {\n\t\t// Clean up the label callouts\n\t\tconst callout = Tools.appendOrSelect(this.innerWrap, `g.callout-lines-${dir}`);\n\t\tconst intersectPointX = dir === Configuration.pie.callout.direction.RIGHT ?\n\t\t\tendPos.x - Configuration.pie.callout.horizontalLineLength :\n\t\t\tendPos.x + Configuration.pie.callout.horizontalLineLength;\n\n\t\t// draw vertical line\n\t\tconst verticalLine = Tools.appendOrSelect(callout, \"line.vertical-line\");\n\t\tverticalLine\n\t\t\t.style(\"stroke-width\", \"1px\")\n\t\t\t.attr(\"x1\", startPos.x)\n\t\t\t.attr(\"y1\", startPos.y)\n\t\t\t.attr(\"x2\", intersectPointX)\n\t\t\t.attr(\"y2\", endPos.y);\n\n\t\t// draw horizontal line\n\t\tconst horizontalLine = Tools.appendOrSelect(callout, \"line.horizontal-line\");\n\t\thorizontalLine\n\t\t\t.style(\"stroke-width\", \"1px\")\n\t\t\t.attr(\"x1\", intersectPointX)\n\t\t\t.attr(\"y1\", endPos.y)\n\t\t\t.attr(\"x2\", endPos.x)\n\t\t\t.attr(\"y2\", endPos.y);\n\t}\n}\n\n// d3 Tween functions\nfunction arcTween(a, arcFunc) {\n\tconst i = interpolate(this._current, a);\n\n\treturn t => {\n\t\tthis._current = i(t);\n\n\t\treturn arcFunc(this._current);\n\t};\n}\n"]}