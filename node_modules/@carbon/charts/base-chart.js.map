{"version":3,"file":"base-chart.js","sourceRoot":"","sources":["src/base-chart.ts"],"names":[],"mappings":"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","sourcesContent":["// D3 Imports\nimport {\n\tevent,\n\tmouse,\n\tselect,\n\tselectAll\n} from \"d3-selection\";\nimport { scaleOrdinal } from \"d3-scale\";\nimport { transition, Transition } from \"d3-transition\";\n\n// Internal Imports\nimport * as Configuration from \"./configuration\";\nimport { ChartConfig, BaseChartOptions, ChartData } from \"./configuration\";\nimport { Tools } from \"./tools\";\nimport PatternsService from \"./services/patterns\";\nimport { ChartOverlay } from \"./components/index\";\nimport { ChartTooltip } from \"./components/tooltip\";\n\n// Misc\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nexport class BaseChart {\n\tstatic chartCount = 1;\n\n\tid = \"\";\n\tchartContainerID = \"\";\n\n\t// Chart element references\n\tcontainer: any;\n\tholder: Element;\n\tsvg: any;\n\tinnerWrap: any;\n\n\toptions: BaseChartOptions = Tools.merge({}, Configuration.options.BASE);\n\n\t// Data\n\tdata: ChartData;\n\tdisplayData: ChartData;\n\tfixedDataLabels;\n\n\t// Fill scales & fill related objects\n\tpatternScale = {};\n\tcolorScale = {};\n\tpatternsService: PatternsService;\n\n\t// Event target\n\tevents: any;\n\teventHandlers = {\n\t\ttooltips: null\n\t};\n\n\t// Misc\n\tchartOverlay: ChartOverlay;\n\ttooltip: ChartTooltip;\n\n\tconstructor(holder: Element, configs: ChartConfig<BaseChartOptions>) {\n\t\tthis.id = `chart-${BaseChart.chartCount++}`;\n\t\tif (configs.options) {\n\t\t\tthis.options = Tools.merge({}, this.options, configs.options);\n\t\t}\n\n\t\t// Save holder element reference, and initialize it by applying appropriate styling\n\t\tthis.holder = holder;\n\t\tthis.styleHolderElement();\n\n\t\tconst {chartId, container} = this.setChartIDContainer();\n\t\tthis.container = container;\n\t\tthis.chartContainerID = chartId;\n\n\t\tif (this.options.containerResizable) {\n\t\t\tthis.resizeWhenContainerChange();\n\t\t}\n\n\t\tthis.events = document.createDocumentFragment();\n\n\t\t// Initialize charting components\n\t\tthis.chartOverlay = new ChartOverlay(this.holder, this.options.overlay);\n\t\tthis.tooltip = new ChartTooltip(this.container.node());\n\n\t\tif (configs.data) {\n\t\t\tthis.setData(configs.data);\n\t\t}\n\t}\n\n\tstyleHolderElement() {\n\t\tconst holderElement = this.holder as HTMLElement;\n\t\tconst { width, height } = this.options;\n\n\t\t// Add class to chart holder\n\t\tselect(this.holder).classed(\"chart-holder\", true);\n\n\t\t// If width exists in options\n\t\tif (width) {\n\t\t\t// Apply formatted width attribute to chart\n\t\t\tholderElement.style.width = Tools.formatWidthHeightValues(width);\n\t\t}\n\n\t\t// If height exists in options\n\t\tif (height) {\n\t\t\t// Apply formatted height attribute to chart\n\t\t\tholderElement.style.height = Tools.formatWidthHeightValues(height);\n\t\t}\n\t}\n\n\tdispatchEvent(eventType: string, eventDetail?: object) {\n\t\tlet newEvent;\n\t\tif (eventDetail) {\n\t\t\tnewEvent = new CustomEvent(eventType, {\n\t\t\t\tdetail: eventDetail\n\t\t\t});\n\t\t} else {\n\t\t\tnewEvent = document.createEvent(\"Event\");\n\t\t\tnewEvent.initEvent(eventType, false, true);\n\t\t}\n\n\t\tthis.events.dispatchEvent(newEvent);\n\t}\n\n\tsetData(data: any) {\n\t\tconst initialDraw = !this.innerWrap;\n\t\tconst newDataIsAPromise = Promise.resolve(data) === data;\n\n\t\t// Dispatch the update event\n\t\tthis.dispatchEvent(\"data-change\");\n\n\t\tif (initialDraw || newDataIsAPromise) {\n\t\t\tthis.chartOverlay.show();\n\t\t}\n\n\t\t// Hide current showing tooltip\n\t\tif (!initialDraw) {\n\t\t\tthis.hideTooltip();\n\t\t}\n\n\t\tPromise.resolve(data).then(value => {\n\t\t\t// Dispatch the update event\n\t\t\tthis.dispatchEvent(\"data-load\");\n\n\t\t\t// Process data\n\t\t\t// this.data = this.dataProcessor(Tools.clone(value));\n\t\t\tthis.data = Tools.clone(value);\n\n\t\t\tif (this.data.datasets && this.data.datasets.length > 0) {\n\t\t\t\tthis.displayData = this.dataProcessor(Tools.clone(value));\n\n\t\t\t\tconst keys = this.getKeysFromData();\n\n\t\t\t\t// Grab the old legend items, the keys from the current data\n\t\t\t\t// Compare the two, if there are any differences (additions/removals)\n\t\t\t\t// Completely remove the legend and render again\n\t\t\t\tconst oldLegendItems = this.getActiveLegendItems();\n\t\t\t\tconst keysArray = Object.keys(keys);\n\t\t\t\tconst { missing: removedItems, added: newItems } = Tools.arrayDifferences(oldLegendItems, keysArray);\n\n\t\t\t\t// Update keys for legend use the latest data keys\n\t\t\t\tthis.options.keys = keys;\n\n\t\t\t\t// Set the color scale based on the keys present in the data\n\t\t\t\tthis.setColorScale();\n\n\t\t\t\t// Add patterns to page, set pattern scales\n\t\t\t\tif (this.options.accessibility) {\n\t\t\t\t\tthis.setPatterns();\n\t\t\t\t}\n\n\t\t\t\t// Perform the draw or update chart\n\t\t\t\tif (initialDraw) {\n\t\t\t\t\tthis.initialDraw();\n\t\t\t\t} else {\n\t\t\t\t\tif (removedItems.length > 0 || newItems.length > 0) {\n\t\t\t\t\t\tthis.addOrUpdateLegend();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.update();\n\t\t\t\t}\n\t\t\t\tthis.drawTitle();\n\t\t\t} else {\n\t\t\t\tthis.chartOverlay.show(Configuration.options.BASE.overlay.types.noData);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKeysFromData() {\n\t\tconst keys = {};\n\n\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS) {\n\t\t\t// Build out the keys array of objects to represent the legend items\n\t\t\tthis.displayData.labels.forEach(label => {\n\t\t\t\tkeys[label] = Configuration.legend.items.status.ACTIVE;\n\t\t\t});\n\t\t} else {\n\t\t\tthis.displayData.datasets.forEach(dataset => {\n\t\t\t\tkeys[dataset.label] = Configuration.legend.items.status.ACTIVE;\n\t\t\t});\n\t\t}\n\n\t\t// Apply disabled legend items from previous data\n\t\t// That also are applicable to the new data\n\t\tconst disabledLegendItems = this.getDisabledLegendItems();\n\t\tObject.keys(keys).forEach(key => {\n\t\t\tif (disabledLegendItems.indexOf(key) !== -1) {\n\t\t\t\tkeys[key] = Configuration.legend.items.status.DISABLED;\n\t\t\t}\n\t\t});\n\n\t\tif (!this.fixedDataLabels) {\n\t\t\tthis.fixedDataLabels = this.displayData.labels;\n\t\t} else {\n\t\t\tthis.displayData.labels.forEach(element => {\n\t\t\t\tif (this.fixedDataLabels.indexOf(element) === -1) {\n\t\t\t\t\tthis.fixedDataLabels.push(element);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn keys;\n\t}\n\n\tgetLegendType() {\n\t\tconst { datasets } = this.displayData;\n\n\t\t// TODO - Support the labels based legend for line chart\n\t\tif (datasets.length === 1 && datasets[0].backgroundColors && datasets[0].backgroundColors.length > 1) {\n\t\t\treturn Configuration.legend.basedOn.LABELS;\n\t\t} else {\n\t\t\treturn Configuration.legend.basedOn.SERIES;\n\t\t}\n\t}\n\n\tsetPatterns() {\n\t\t// Accessibility & patterns\n\t\tthis.patternsService = new PatternsService();\n\t\tthis.patternsService.addPatternSVGs(this.displayData, this.colorScale, this.chartContainerID, this.getLegendType());\n\n\t\tconst patternURLs = this.patternsService.getFillValues();\n\t\tObject.keys(patternURLs).forEach(datasetLabel => {\n\t\t\tthis.patternScale[datasetLabel] = scaleOrdinal()\n\t\t\t\t.range(patternURLs[datasetLabel])\n\t\t\t\t.domain(this.getLegendItemKeys());\n\t\t});\n\t}\n\n\tsetColorScale() {\n\t\tif (this.displayData.datasets[0].backgroundColors) {\n\t\t\tthis.displayData.datasets.forEach(dataset => {\n\t\t\t\tthis.colorScale[dataset.label] = scaleOrdinal().range(dataset.backgroundColors).domain(this.fixedDataLabels);\n\t\t\t});\n\t\t} else {\n\t\t\tconst colors = Configuration.options.BASE.colors;\n\t\t\tthis.displayData.datasets.forEach((dataset, i) => {\n\t\t\t\tthis.colorScale[dataset.label] = scaleOrdinal().range([colors[i]]).domain(this.fixedDataLabels);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFillColor(datasetLabel: any, label?: any, value?: any) {\n\t\tif (this.options.getFillColor && !this.options.accessibility) {\n\t\t\treturn this.options.getFillColor(datasetLabel, label, value) || this.getFillScale()[datasetLabel](label);\n\t\t} else {\n\t\t\treturn this.getFillScale()[datasetLabel](label);\n\t\t}\n\t}\n\n\tgetStrokeColor(datasetLabel: any, label?: any, value?: any) {\n\t\tif (this.options.getStrokeColor) {\n\t\t\treturn this.options.getStrokeColor(datasetLabel, label, value) || this.colorScale[datasetLabel](label);\n\t\t} else {\n\t\t\treturn this.colorScale[datasetLabel](label);\n\t\t}\n\t}\n\n\t// TODO - Refactor\n\tgetChartSize(container = this.container) {\n\t\tlet ratio, marginForLegendTop, marginForChartTitle;\n\t\tif (container.node().clientWidth > Configuration.charts.widthBreak) {\n\t\t\tratio = Configuration.charts.magicRatio;\n\t\t\tmarginForLegendTop = 0;\n\t\t} else {\n\t\t\tmarginForLegendTop = Configuration.charts.marginForLegendTop;\n\t\t\tratio = 1;\n\t\t}\n\n\t\t// Store computed actual size, to be considered for change if chart does not support axis\n\t\tconst marginsToExclude = 0;\n\n\n\t\tconst titleRef = container.select(\"text.chart-title\");\n\t\tmarginForChartTitle = titleRef.empty() ? 0 : this.svg.select(\"text.chart-title\").node().getBoundingClientRect().height;\n\n\t\tconst computedChartSize = {\n\t\t\theight: container.node().clientHeight - marginForLegendTop - marginForChartTitle,\n\t\t\twidth: (container.node().clientWidth - marginsToExclude) * ratio\n\t\t};\n\n\t\t// If chart is of type pie or donut, width and height should equal to the min of the width and height computed\n\t\tlet maxSizePossible = Math.min(computedChartSize.height, computedChartSize.width);\n\t\tmaxSizePossible = Math.max(maxSizePossible, Configuration.charts.minWidth);\n\n\t\treturn {\n\t\t\theight: maxSizePossible,\n\t\t\twidth: maxSizePossible\n\t\t};\n\t}\n\n\t/*\n\t * removes the chart and any tooltips\n\t */\n\tremoveChart() {\n\t\t// this.holder.remove();\n\t\tthis.holder.querySelector(\"div.chart-wrapper\").parentNode.removeChild(this.holder.querySelector(\"div.chart-wrapper\"));\n\n\t}\n\n\tsetSVG(): any {\n\t\tconst chartSize = this.getChartSize();\n\t\tthis.svg = this.container.append(\"svg\")\n\t\t\t.classed(\"chart-svg \" + this.options.type, true);\n\n\t\tthis.innerWrap = this.svg.append(\"g\")\n\t\t\t.classed(\"inner-wrap\", true);\n\n\t\treturn this.svg;\n\t}\n\n\t// Default fallback when no data processing is needed\n\tdataProcessor(data: ChartData): any {\n\t\treturn data;\n\t}\n\n\t/*\n\t * called when the chart needs to be drawn initially\n\t */\n\tinitialDraw() {\n\t\tconsole.warn(\"You should implement your own `initialDraw()` function.\");\n\t}\n\n\tupdateChart() {\n\t\tconsole.warn(\"You should implement your own `updateChart()` function.\");\n\t}\n\n\tresizeChart() {\n\t\tconsole.warn(\"You should implement your own `resizeChart()` function.\");\n\t}\n\n\tupdate(value?: any) {\n\t\tconsole.warn(\"You should implement your own `update()` function.\");\n\t}\n\n\tresizeWhenContainerChange() {\n\t\tlet containerWidth = this.holder.clientWidth;\n\t\tlet containerHeight = this.holder.clientHeight;\n\n\t\tconst resizeObserver = new ResizeObserver((entries, observer) => {\n\t\t\tfor (const entry of entries) {\n\t\t\t\tif (Math.abs(containerWidth - this.holder.clientWidth) > 1\n\t\t\t\t\t|| Math.abs(containerHeight - this.holder.clientHeight) > 1) {\n\t\t\t\t\tcontainerWidth = this.holder.clientWidth;\n\t\t\t\t\tcontainerHeight = this.holder.clientHeight;\n\n\t\t\t\t\tselectAll(\".legend-tooltip\").style(\"display\", \"none\");\n\n\t\t\t\t\tthis.hideTooltip();\n\n\t\t\t\t\tthis.resizeChart();\n\t\t\t\t\tthis.drawTitle();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tresizeObserver.observe(this.holder);\n\t}\n\n\t/**\n\t * Draws title within the Chart's svg element.\n\t * @param title\n\t */\n\tdrawTitle() {\n\t\tif (this.options.title) {\n\t\t\t// adds title or gets reference to title\n\t\t\tconst titleRef = Tools.appendOrSelect(this.svg, \"text.chart-title\");\n\t\t\ttitleRef.text(this.options.title);\n\n\t\t\t// position of the title element\n\t\t\tconst titlePos = titleRef.node().getBoundingClientRect().bottom;\n\n\t\t\t// the translations on the inner wrap and the current position\n\t\t\tconst translateObj = Tools.getTranslationValues(this.innerWrap.node());\n\t\t\tconst innerWrapPos = this.innerWrap.node().getBoundingClientRect().top;\n\n\t\t\t// check that the inner wrap is below the title text\n\t\t\tlet diff = innerWrapPos - titlePos;\n\t\t\tif (diff < 0) {\n\t\t\t\t// we want the inner wrap to be under the title and add some padding\n\t\t\t\tdiff = Math.abs(diff) + Configuration.charts.title.marginBottom;\n\t\t\t} else {\n\t\t\t\t// the innerwrap is below the title, we assert the title bottom padding\n\t\t\t\tif (diff < Configuration.charts.title.marginBottom) {\n\t\t\t\t\tdiff = Configuration.charts.title.marginBottom - diff;\n\t\t\t\t} else {\n\t\t\t\t\t// does not need to move\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.innerWrap\n\t\t\t\t.attr(\"transform\", `translate(${translateObj.tx}, ${(+translateObj.ty + diff)})`);\n\t\t}\n\t}\n\n\tsetClickableLegend() {\n\t\tconst self = this;\n\t\tconst c = select(this.holder);\n\n\t\tif (this.getActiveLegendItems().length === 1) {\n\t\t\tc.selectAll(\".legend-btn.active\").classed(\"not-allowed\", true);\n\t\t}\n\n\t\t// Add hover effect for legend item circles\n\t\tself.addLegendCircleHoverEffect();\n\n\t\tc.selectAll(\".legend-btn\").each(function() {\n\t\t\tselect(this).classed(\"clickable\", true);\n\n\t\t\tselect(this).on(\"click\", function() {\n\t\t\t\tc.selectAll(\".chart-tooltip\").remove();\n\t\t\t\tc.selectAll(\".label-tooltip\").remove();\n\n\t\t\t\t// Only apply legend filters if there are more than 1 active legend items\n\t\t\t\tconst activeLegendItems = self.getActiveLegendItems();\n\t\t\t\tconst legendButton = select(this);\n\t\t\t\tconst enabling = !legendButton.classed(\"active\");\n\n\t\t\t\t// If there are more than 1 active legend items & one is getting toggled on\n\t\t\t\tif (activeLegendItems.length > 1 || enabling) {\n\t\t\t\t\tself.updateLegend(this);\n\t\t\t\t\tself.applyLegendFilter(legendButton.select(\"text\").text());\n\t\t\t\t}\n\t\t\t\t// If there are 2 active legend items & one is getting toggled off\n\t\t\t\tif (activeLegendItems.length === 2 && !enabling) {\n\t\t\t\t\tc.selectAll(\".legend-btn.active\").classed(\"not-allowed\", true);\n\t\t\t\t}\n\n\t\t\t\tif (activeLegendItems.length === 1 && enabling) {\n\t\t\t\t\tc.selectAll(\".legend-btn.not-allowed\").classed(\"not-allowed\", false);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tsetChartIDContainer() {\n\t\tconst parent = select(this.holder);\n\t\tlet chartId, container;\n\t\tif (parent.select(\".chart-wrapper\").nodes().length > 0) {\n\t\t\tcontainer = parent.select(\".chart-wrapper\");\n\t\t\tchartId = container.attr(\"chart-id\");\n\n\t\t\tcontainer.selectAll(\".chart-svg\").remove();\n\t\t} else {\n\t\t\tchartId = this.id;\n\t\t\tcontainer = parent.append(\"div\");\n\t\t\tcontainer.attr(\"chart-id\", chartId)\n\t\t\t\t.classed(\"chart-wrapper\", true)\n\t\t\t\t.classed(`carbon--theme--${this.options.theme}`, true);\n\t\t\tif (container.select(\".legend-wrapper\").nodes().length === 0) {\n\t\t\t\tconst legendWrapper = container.append(\"div\")\n\t\t\t\t\t.attr(\"class\", \"legend-wrapper\")\n\t\t\t\t\t.attr(\"role\", \"region\")\n\t\t\t\t\t.attr(\"aria-label\", `Chart ${chartId} Legend`);\n\n\t\t\t\tlegendWrapper.append(\"ul\")\n\t\t\t\t\t.attr(\"class\", \"legend\");\n\t\t\t}\n\t\t}\n\t\treturn {chartId, container};\n\t}\n\n\tresetOpacity() {\n\t\tconst svg = selectAll(\"svg.chart-svg\");\n\t\tsvg.selectAll(\"rect\")\n\t\t\t.attr(\"fill-opacity\", Configuration.charts.resetOpacity.opacity)\n\t\t\t.attr(\"stroke-opacity\", Configuration.charts.resetOpacity.opacity);\n\t}\n\n\treduceOpacity(exception) {\n\t\tconst exceptedElement = select(exception);\n\t\tconst exceptedElementData = exceptedElement.datum() as any;\n\t\tselect(exception).attr(\"fill-opacity\", false);\n\t\tselect(exception).attr(\"stroke-opacity\", Configuration.charts.reduceOpacity.opacity);\n\t\tselect(exception).attr(\"fill\", (d: any) => this.getFillColor(d.datasetLabel, exceptedElementData.label, exceptedElementData.value));\n\t}\n\n\t// ================================================================================\n\t// Legend\n\t// ================================================================================\n\tgetLegendItems() {\n\t\tlet legendItems = {};\n\t\tif (this.options.keys) {\n\t\t\tlegendItems = this.options.keys;\n\t\t}\n\n\t\treturn legendItems;\n\t}\n\n\tgetLegendItemArray() {\n\t\tconst legendItems = this.getLegendItems();\n\t\tconst legendItemKeys = Object.keys(legendItems);\n\n\t\treturn legendItemKeys.map(key => ({\n\t\t\tkey,\n\t\t\tvalue: legendItems[key]\n\t\t}));\n\t}\n\n\tgetLegendItemKeys() {\n\t\treturn Object.keys(this.getLegendItems());\n\t}\n\n\tgetDisabledLegendItems() {\n\t\tconst legendItems = this.getLegendItems();\n\t\tconst legendItemKeys = Object.keys(legendItems);\n\n\t\treturn legendItemKeys.filter(itemKey => legendItems[itemKey] === Configuration.legend.items.status.DISABLED);\n\t}\n\n\tgetActiveLegendItems() {\n\t\tconst legendItems = this.getLegendItems();\n\t\tconst legendItemKeys = Object.keys(legendItems);\n\n\t\treturn legendItemKeys.filter(itemKey => legendItems[itemKey] === Configuration.legend.items.status.ACTIVE);\n\t}\n\n\tupdateLegend(legend) {\n\t\tconst thisLegend = select(legend);\n\t\tconst circle = select(legend).select(\".legend-circle\");\n\n\t\tthisLegend.classed(\"active\", !thisLegend.classed(\"active\"));\n\t\tif (thisLegend.classed(\"active\")) {\n\t\t\tcircle.style(\"background-color\", circle.style(\"border-color\"))\n\t\t\t\t.style(\"border-color\", Configuration.legend.active.borderColor)\n\t\t\t\t.style(\"border-style\", Configuration.legend.active.borderStyle)\n\t\t\t\t.style(\"border-width\", Configuration.legend.active.borderWidth);\n\t\t} else {\n\t\t\tcircle.style(\"border-color\", circle.style(\"background-color\"))\n\t\t\t\t.style(\"background-color\", Configuration.legend.inactive.backgroundColor)\n\t\t\t\t.style(\"border-style\", Configuration.legend.inactive.borderStyle)\n\t\t\t\t.style(\"border-width\", Configuration.legend.inactive.borderWidth);\n\t\t}\n\t}\n\n\taddLegend() {\n\t\tif (this.container.select(\".legend-tooltip\").nodes().length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst legendItemsArray = this.getLegendItemArray();\n\t\tconst legendItems = this.container.select(\".legend\")\n\t\t\t.attr(\"font-size\", Configuration.legend.fontSize)\n\t\t\t.selectAll(\"li.legend-btn\")\n\t\t\t.data(legendItemsArray, d => d.key);\n\n\t\tlegendItems.exit()\n\t\t\t.remove();\n\n\t\tconst legendEnter = legendItems.enter()\n\t\t\t.append(\"li\")\n\t\t\t.attr(\"class\", \"legend-btn active\");\n\n\t\tlegendEnter.append(\"div\")\n\t\t\t.attr(\"class\", \"legend-circle\");\n\n\t\tlegendEnter.append(\"text\");\n\n\t\tlegendEnter.selectAll(\"text\")\n\t\t\t.merge(legendItems.selectAll(\"text\"))\n\t\t\t.text(d => d.key);\n\n\t\tlegendEnter.select(\"div\")\n\t\t\t.merge(legendItems.selectAll(\"div\"))\n\t\t\t.style(\"background-color\", (d, i) => {\n\t\t\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS && d.value === Configuration.legend.items.status.ACTIVE) {\n\t\t\t\t\treturn this.getStrokeColor(this.displayData.datasets[0].label, d.key, d.value);\n\t\t\t\t} else if (d.value === Configuration.legend.items.status.ACTIVE) {\n\t\t\t\t\treturn this.getStrokeColor(d.key);\n\t\t\t\t}\n\n\t\t\t\treturn \"white\";\n\t\t\t});\n\t}\n\n\tpositionLegend() {\n\t\tif (this.container.select(\".legend-tooltip\").nodes().length > 0\n\t\t\t&& this.container.select(\".legend-tooltip\").node().style.display === \"block\") { return; }\n\n\t\tconst svgWidth = this.container.select(\"g.inner-wrap\").node().getBBox().width;\n\t\tif (this.isLegendOnRight()) {\n\t\t\tthis.container.selectAll(\".expand-btn\").remove();\n\t\t\tthis.container.select(\".legend-wrapper\").style(\"height\", 0);\n\t\t\tthis.container.select(\".legend\").classed(\"right-legend\", true);\n\t\t} else {\n\t\t\tthis.container.select(\".legend-wrapper\").style(\"height\", Configuration.legend.wrapperHeight);\n\t\t}\n\n\t\tif (this.hasLegendExpandBtn()) {\n\t\t\tthis.container.select(\".legend\").classed(\"right-legend\", false)\n\t\t\t\t.style(\"width\", null);\n\t\t\tconst btns = this.container.selectAll(\".legend-btn\").nodes();\n\t\t\tlet btnsWidth = 0;\n\t\t\tbtns.forEach(btn => {\n\t\t\t\tif ((btnsWidth + btn.clientWidth + Configuration.legend.widthTolerance) > svgWidth) {\n\t\t\t\t\tselect(btn).style(\"display\", \"none\");\n\t\t\t\t} else {\n\t\t\t\t\tbtnsWidth += btn.clientWidth;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (this.container.select(\".expand-btn\").nodes().length === 0) {\n\t\t\t\tthis.addTooltipOpenButtonToLegend();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.container.selectAll(\".legend-btn\").style(\"display\", null);\n\t\t}\n\t}\n\n\taddOrUpdateLegend() {\n\t\tthis.addLegend();\n\n\t\tif (this.options.legendClickable) {\n\t\t\tthis.setClickableLegend();\n\t\t}\n\n\t\tthis.positionLegend();\n\t}\n\n\taddLegendCircleHoverEffect() {\n\t\tthis.container.selectAll(\"li.legend-btn\")\n\t\t\t.on(\"mouseover\", function() {\n\t\t\t\tconst circleRef = select(this).select(\"div.legend-circle\");\n\t\t\t\tconst color = (circleRef.node() as HTMLElement).style.backgroundColor.substring(4,\n\t\t\t\t\t(circleRef.node() as HTMLElement).style.backgroundColor.length - 1);\n\n\t\t\t\tcircleRef.style(\n\t\t\t\t\t\"box-shadow\",\n\t\t\t\t\t`0 0 0 ${Configuration.legend.hoverShadowSize} rgba(${color}, ${Configuration.legend.hoverShadowTransparency})`\n\t\t\t\t);\n\t\t\t})\n\t\t\t.on(\"mouseout\", function() {\n\t\t\t\tselect(this).select(\"div.legend-circle\").style(\"box-shadow\", \"none\");\n\t\t\t});\n\t}\n\n\thasLegendExpandBtn() {\n\t\treturn this.container.node().clientWidth < Configuration.charts.widthBreak ||\n\t\t\tthis.container.node().clientHeight < this.container.select(\"ul.legend\").node().clientHeight;\n\t}\n\n\tisLegendOnRight() {\n\t\treturn this.container.node().clientWidth >= Configuration.charts.widthBreak &&\n\t\t\tthis.container.node().clientHeight >= this.container.select(\"ul.legend\").node().clientHeight;\n\t}\n\n\t/**\n\t *\n\t * When a legend item is clicked, apply/remove the appropriate filter\n\t * @param {string} changedLabel The label of the legend element the user clicked on\n\t * @memberof PieChart\n\t */\n\tapplyLegendFilter(changedLabel: string) {\n\t\tconst { ACTIVE, DISABLED } = Configuration.legend.items.status;\n\t\tconst oldStatus = this.options.keys[changedLabel];\n\n\t\tthis.options.keys[changedLabel] = (oldStatus === ACTIVE ? DISABLED : ACTIVE);\n\n\t\tthis.update();\n\t}\n\n\tsetClickableLegendInTooltip() {\n\t\tconst self = this;\n\t\tconst c = select(this.container);\n\t\tconst tooltip = c.select(\".legend-tooltip-content\");\n\t\ttooltip.selectAll(\".legend-btn\").each(function() {\n\t\t\tselect(this).on(\"click\", function() {\n\t\t\t\tself.updateLegend(this);\n\n\t\t\t\t// TODO - setClickableLegendInTooltip()\n\t\t\t});\n\t\t});\n\t}\n\n\t// ================================================================================\n\t// Tooltips\n\t// ================================================================================\n\taddTooltipOpenButtonToLegend() {\n\t\tconst self = this;\n\t\tconst thisLegend = this.container.select(\".legend\");\n\t\tthisLegend.append(\"div\")\n\t\t\t.attr(\"class\", \"expand-btn\")\n\t\t\t.style(\"cursor\", \"pointer\")\n\t\t\t.on(\"click\", function() {\n\t\t\t\tself.openLegendTooltip(this);\n\t\t\t});\n\t}\n\n\t// TODO - Refactor\n\topenLegendTooltip(target) {\n\t\tselectAll(\".legend-tooltip\").remove();\n\t\tconst mouseXPoint = mouse(this.container.node())[0];\n\t\tconst windowXPoint = event.x;\n\t\tlet tooltip;\n\t\tif (this.container.select(\".legend-tooltip\").nodes().length > 0) {\n\t\t\ttooltip = selectAll(\".legend-tooltip\").style(\"display\", \"block\");\n\t\t\ttooltip.select(\"arrow\").remove();\n\t\t} else {\n\t\t\ttooltip = this.container.append(\"div\")\n\t\t\t\t.attr(\"class\", \"tooltip chart-tooltip legend-tooltip\")\n\t\t\t\t.style(\"display\", \"block\")\n\t\t\t\t.style(\"top\", (mouse(this.container.node())[1] - Configuration.legend.margin.top) + \"px\");\n\t\t\ttooltip.append(\"p\").text(\"Legend\")\n\t\t\t\t.attr(\"class\", \"legend-tooltip-header\");\n\t\t\ttooltip.append(\"ul\")\n\t\t\t\t.attr(\"class\", \"legend-tooltip-content\")\n\t\t\t\t.attr(\"font-size\", Configuration.legend.fontSize);\n\t\t\tTools.addCloseBtn(tooltip, \"md\", \"white\")\n\t\t\t\t.on(\"click\", () => {\n\t\t\t\t\tselectAll(\".legend-tooltip\").style(\"display\", \"none\");\n\t\t\t\t});\n\n\t\t\tconst activeLegendItems = this.getActiveLegendItems();\n\t\t\tconst legendContent = select(\".legend-tooltip-content\")\n\t\t\t\t.attr(\"font-size\", Configuration.legend.fontSize)\n\t\t\t\t.selectAll(\"div\")\n\t\t\t\t.data(this.getLegendItemArray(), (d: any) => d.key)\n\t\t\t\t.enter()\n\t\t\t\t\t.append(\"li\")\n\t\t\t\t\t.classed(\"legend-btn\", true)\n\t\t\t\t\t.classed(\"clickable\", this.options.legendClickable)\n\t\t\t\t\t.classed(\"active\", d => d.value === Configuration.legend.items.status.ACTIVE)\n\t\t\t\t\t.classed(\"not-allowed\", d => activeLegendItems.length === 1 && d.value === Configuration.legend.items.status.ACTIVE)\n\t\t\t\t\t.on(\"click\", (clickedItem, e) => {\n\t\t\t\t\t\tif (!this.options.legendClickable) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst legendButton = select(event.currentTarget);\n\t\t\t\t\t\tconst enabling = !legendButton.classed(\"active\");\n\n\t\t\t\t\t\tif (activeLegendItems.length > 1 || enabling) {\n\t\t\t\t\t\t\tthis.updateLegend(event.currentTarget);\n\n\t\t\t\t\t\t\tthis.applyLegendFilter(clickedItem.key);\n\n\t\t\t\t\t\t\tthis.container.selectAll(\"ul.legend li.legend-btn\")\n\t\t\t\t\t\t\t\t.data(this.getLegendItemArray(), (d: any) => d.key)\n\t\t\t\t\t\t\t\t.classed(\"active\", d => d.value === Configuration.legend.items.status.ACTIVE)\n\t\t\t\t\t\t\t\t.select(\"div.legend-circle\")\n\t\t\t\t\t\t\t\t.style(\"background-color\", (d, i) => {\n\t\t\t\t\t\t\t\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS && d.value === Configuration.legend.items.status.ACTIVE) {\n\t\t\t\t\t\t\t\t\t\treturn this.getStrokeColor(this.displayData.datasets[0].label, d.key, d.value);\n\t\t\t\t\t\t\t\t\t} else if (d.value === Configuration.legend.items.status.ACTIVE) {\n\t\t\t\t\t\t\t\t\t\treturn this.getStrokeColor(d.key);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn \"white\";\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.style(\"border-color\", d => {\n\t\t\t\t\t\t\t\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS) {\n\t\t\t\t\t\t\t\t\t\treturn this.getStrokeColor(this.displayData.datasets[0].label, d.key, d.value);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn this.getStrokeColor(d.key);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.style(\"border-style\", Configuration.legend.inactive.borderStyle)\n\t\t\t\t\t\t\t\t.style(\"border-width\", Configuration.legend.inactive.borderWidth);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If there are 2 active legend items & one is getting toggled off\n\t\t\t\t\t\tif (activeLegendItems.length === 2 && !enabling) {\n\t\t\t\t\t\t\tthis.container.selectAll(\".legend-btn.active\").classed(\"not-allowed\", true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (activeLegendItems.length === 1 && enabling) {\n\t\t\t\t\t\t\tthis.container.selectAll(\".legend-btn.not-allowed\").classed(\"not-allowed\", false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\tlegendContent.append(\"div\")\n\t\t\t\t.attr(\"class\", \"legend-circle\")\n\t\t\t\t.style(\"background-color\", (d, i) => {\n\t\t\t\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS && d.value === Configuration.legend.items.status.ACTIVE) {\n\t\t\t\t\t\treturn this.getStrokeColor(this.displayData.datasets[0].label, d.key, d.value);\n\t\t\t\t\t} else if (d.value === Configuration.legend.items.status.ACTIVE) {\n\t\t\t\t\t\treturn this.getStrokeColor(d.key);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn \"white\";\n\t\t\t\t})\n\t\t\t\t.style(\"border-color\", d => {\n\t\t\t\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS) {\n\t\t\t\t\t\treturn this.getStrokeColor(this.displayData.datasets[0].label, d.key, d.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.getStrokeColor(d.key);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.style(\"border-style\", Configuration.legend.inactive.borderStyle)\n\t\t\t\t.style(\"border-width\", Configuration.legend.inactive.borderWidth);\n\n\t\t\tlegendContent.append(\"text\")\n\t\t\t\t.text(d => d.key);\n\t\t}\n\n\t\t// Position the tooltip\n\t\ttooltip.classed(\"arrow-right\", true);\n\t\ttooltip.append(\"div\").attr(\"class\", \"arrow\");\n\t\ttooltip.style(\"left\", `${mouseXPoint - Configuration.tooltip.width - Configuration.tooltip.arrowWidth}px`);\n\n\t\tif (this.options.legendClickable) {\n\t\t\tthis.addLegendCircleHoverEffect();\n\t\t}\n\t}\n\n\tshowLabelTooltip(d, leftSide) {\n\t\tselectAll(\".label-tooltip\").remove();\n\t\tconst mouseXPoint = mouse(this.holder as SVGSVGElement)[0] + Configuration.tooltip.arrowWidth;\n\t\tconst tooltip = this.container.append(\"div\")\n\t\t\t.attr(\"class\", \"tooltip label-tooltip\")\n\t\t\t.style(\"top\", mouse(this.holder as SVGSVGElement)[1] - Configuration.tooltip.magicTop1 + \"px\");\n\t\tTools.addCloseBtn(tooltip, \"xs\")\n\t\t\t.on(\"click\", () => {\n\t\t\t\tthis.resetOpacity();\n\t\t\t\tselectAll(\".tooltip\").remove();\n\t\t\t});\n\t\ttooltip.append(\"p\").text(d);\n\n\t\tif (leftSide) {\n\t\t\ttooltip.classed(\"arrow-left\", true)\n\t\t\t\t\t.style(\"left\", mouseXPoint + \"px\")\n\t\t\t\t\t.append(\"div\").attr(\"class\", \"arrow\");\n\t\t} else {\n\t\t\ttooltip.classed(\"arrow-right\", true);\n\n\t\t\tconst xPoint = mouseXPoint - (tooltip.node() as Element).clientWidth - Configuration.tooltip.magicXPoint2;\n\t\t\ttooltip.style(\"left\", xPoint + \"px\")\n\t\t\t\t\t.append(\"div\").attr(\"class\", \"arrow\");\n\t\t}\n\t}\n\n\thideTooltip() {\n\t\tthis.resetOpacity();\n\n\t\tthis.tooltip.hide();\n\t}\n\n\tgenerateTooltipHTML(label, value) {\n\t\tif (this.options.tooltip.size === Configuration.tooltip.size.COMPACT) {\n\t\t\treturn `<b>${label}:</b> ${value}<br/>`;\n\t\t} else {\n\t\t\treturn `\n\t\t\t\t<p class='bignum'>${label}</p>\n\t\t\t\t<p>${value}</p>\n\t\t\t`;\n\t\t}\n\t}\n\n\tgetTooltipHTML = d => {\n\t\tconst formattedValue = this.options.tooltip.formatter ? this.options.tooltip.formatter(d.value) : d.value.toLocaleString(\"en\");\n\t\tif (this.getLegendType() === Configuration.legend.basedOn.LABELS) {\n\t\t\treturn this.generateTooltipHTML(d.label, formattedValue);\n\t\t}\n\n\t\treturn this.generateTooltipHTML(d.datasetLabel, formattedValue);\n\t}\n\n\tshowTooltip(d, clickedElement?: Element) {\n\t\t// Reset opacity of all elements in the chart\n\t\tthis.resetOpacity();\n\n\t\tconst { customHTML } = this.options.tooltip;\n\t\tlet contentHTML;\n\t\tif (customHTML) {\n\t\t\tcontentHTML = customHTML;\n\t\t} else {\n\t\t\tcontentHTML = this.getTooltipHTML(d);\n\t\t}\n\n\t\tthis.tooltip.show(contentHTML);\n\t}\n\n\tgetFillScale() {\n\t\treturn this.options.accessibility ? this.patternScale : this.colorScale;\n\t}\n\n\tgetDefaultTransition(type?: string): Transition<any, any, any, any> {\n\t\tif (this.options.animations === false) {\n\t\t\treturn this.getInstantTransition();\n\t\t} else if (Configuration.transitions[type]) {\n\t\t\treturn transition().duration(Configuration.transitions[type].duration);\n\t\t}\n\n\t\treturn transition().duration(Configuration.transitions.default.duration);\n\t}\n\n\tgetInstantTransition(): Transition<any, any, any, any>  {\n\t\treturn transition().duration(0);\n\t}\n\n\t// Used to determine whether to use a transition for updating fill attributes in charting elements\n\t// Will disable the transition if in accessibility mode\n\tgetFillTransition(animate?: boolean): Transition<any, any, any, any>  {\n\t\tif (this.options.animations === false) {\n\t\t\treturn this.getInstantTransition();\n\t\t}\n\n\t\treturn transition().duration(animate === false ? 0 : Configuration.transitions.default.duration);\n\t}\n\n\tgetBBox(selector: any) {\n\t\treturn this.innerWrap.select(selector).node().getBBox();\n\t}\n}\n"]}